<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taylor Series</title>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.2.1/math.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <link rel="icon" href="{{ url_for('static', filename='images/taylor.jpg') }}" type="image/jpg">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="container">
        <h1>Taylor Series</h1>
        <p class="subtitle">Explore how polynomial approximations converge to functions</p>
        <p class="subtitle">Made by <a href="https://home.hxr.life/" target="_blank" rel="noopener noreferrer">Hunter</a></p>

        <div class="main-content">
            <div class="controls-panel">
                <div class="control-group">
                    <label>Choose Example Function</label>
                    <select id="example-select">
                        <option value="">-- Select an example --</option>
                        <option value="sin(x)">sin(x)</option>
                        <option value="cos(x)">cos(x)</option>
                        <option value="exp(x)">e^x</option>
                        <option value="log(1+x)">ln(1+x)</option>
                        <option value="1/(1-x)">1/(1-x)</option>
                        <option value="tan(x)">tan(x)</option>
                        <option value="sinh(x)">sinh(x)</option>
                        <option value="cosh(x)">cosh(x)</option>
                        <option value="atan(x)">arctan(x)</option>
                        <option value="sqrt(1+x)">(1+x)</option>
                    </select>
                </div>

                <div class="control-group">
                    <label>Or Enter Custom Function f(x)</label>
                    <input type="text" id="function-input" placeholder="e.g., sin(x), exp(x), x^2">
                    <div class="error-message" id="error-message"></div>
                </div>

                <div class="control-group">
                    <label>Center Point (a)</label>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>Expand around x = a</span>
                            <span class="slider-value" id="center-value">0</span>
                        </div>
                        <input type="range" id="center-slider" min="-5" max="5" value="0" step="0.1">
                    </div>
                </div>

                <div class="control-group">
                    <label>Number of Terms (n)</label>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>Polynomial degree</span>
                            <span class="slider-value" id="terms-value">5</span>
                        </div>
                        <input type="range" id="terms-slider" min="1" max="30" value="5">
                    </div>
                </div>

                <div class="control-group">
                    <label>View Range</label>
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>X-axis range</span>
                            <span class="slider-value" id="range-value">10</span>
                        </div>
                        <input type="range" id="range-slider" min="2" max="20" value="10" step="1">
                    </div>
                </div>

                <div class="terms-animation">
                    <button class="btn btn-animate" id="animate-btn">Animate Terms</button>
                    <button class="btn btn-reset" id="reset-btn">Reset</button>
                </div>

                <!-- Slider Settings Dropdown -->
                <div class="settings-section">
                    <div class="settings-dropdown">
                        <div class="settings-header" id="slider-settings-toggle">
                            <span>Slider Settings</span>
                            <span class="settings-icon">&#9660;</span>
                        </div>
                        <div class="settings-content" id="slider-settings-content">
                            <div class="settings-inner">
                                <div class="setting-item">
                                    <label>Center Point (a)</label>
                                    <div class="slider-config">
                                        <div class="slider-config-item">
                                            <label>Min</label>
                                            <input type="number" id="center-min" value="-5" step="0.5">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Max</label>
                                            <input type="number" id="center-max" value="5" step="0.5">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Step</label>
                                            <input type="number" id="center-step" value="0.1" step="0.05" min="0.01">
                                        </div>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <label>Number of Terms (n)</label>
                                    <div class="slider-config">
                                        <div class="slider-config-item">
                                            <label>Min</label>
                                            <input type="number" id="terms-min" value="1" min="0">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Max</label>
                                            <input type="number" id="terms-max" value="30" min="1">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Step</label>
                                            <input type="number" id="terms-step" value="1" min="1">
                                        </div>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <label>View Range</label>
                                    <div class="slider-config">
                                        <div class="slider-config-item">
                                            <label>Min</label>
                                            <input type="number" id="range-min" value="2" min="1">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Max</label>
                                            <input type="number" id="range-max" value="20" min="2">
                                        </div>
                                        <div class="slider-config-item">
                                            <label>Step</label>
                                            <input type="number" id="range-step" value="1" min="0.5">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Animation Settings Dropdown -->
                <div class="settings-section">
                    <div class="settings-dropdown">
                        <div class="settings-header" id="animation-settings-toggle">
                            <span>Animation Settings</span>
                            <span class="settings-icon">&#9660;</span>
                        </div>
                        <div class="settings-content" id="animation-settings-content">
                            <div class="settings-inner">
                                <div class="setting-item checkbox-item">
                                    <input type="checkbox" id="enable-animations" checked>
                                    <label for="enable-animations">Enable graph animations</label>
                                </div>
                                <div class="setting-item">
                                    <label>Animation Speed</label>
                                    <select id="animation-speed">
                                        <option value="500">Slow</option>
                                        <option value="350" selected>Normal</option>
                                        <option value="200">Fast</option>
                                        <option value="100">Very Fast</option>
                                    </select>
                                </div>
                                <div class="setting-item">
                                    <label>Transition Duration (ms)</label>
                                    <input type="range" id="transition-duration" min="0" max="500" value="250" step="50">
                                    <div style="display: flex; justify-content: space-between; font-size: 0.75rem; color: #666; margin-top: 4px;">
                                        <span>None</span>
                                        <span id="transition-value">250ms</span>
                                        <span>500ms</span>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <label>Easing Function</label>
                                    <select id="easing-function">
                                        <option value="linear">Linear</option>
                                        <option value="cubic-in-out" selected>Cubic In-Out</option>
                                        <option value="elastic">Elastic</option>
                                        <option value="bounce">Bounce</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>Supported functions:</strong> sin, cos, tan, exp, log, sqrt, sinh, cosh, tanh, asin, acos, atan, abs, and standard operators (+, -, *, /, ^)
                </div>
            </div>

            <div class="graph-panel">
                <div id="plot"></div>

                <div class="error-section">
                    <div class="collapsible-header" id="error-toggle">
                        <h4>Approximation Error |f(x) - T(x)|</h4>
                        <span class="collapse-icon">&#9660;</span>
                    </div>
                    <div class="collapsible-content error-plot-container" id="error-container">
                        <div id="error-plot"></div>
                    </div>
                </div>

                <div class="legend-info">
                    <div class="legend-item">
                        <div class="legend-color color-original"></div>
                        <span>Original f(x)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-taylor"></div>
                        <span>Taylor Polynomial T<sub>n</sub>(x)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-error"></div>
                        <span>Approximation Error</span>
                    </div>
                </div>

                <!-- Equation Display Section -->
                <div class="equation-section">
                    <h3>Taylor Polynomial T<sub>n</sub>(x)</h3>

                    <div class="equation-box">
                        <div class="equation-label">General Form:</div>
                        <div class="latex-display" id="latex-general"></div>
                    </div>

                    <div class="equation-box expanded-form-box">
                        <div class="equation-label">Expanded Form:</div>
                        <div class="latex-display" id="latex-expanded"></div>
                        <div class="copy-section">
                            <div class="latex-raw" id="latex-raw"></div>
                            <button class="btn btn-copy" id="copy-latex-btn">Copy LaTeX</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast">Copied to clipboard!</div>

    <script src="{{ url_for('static', filename='js/taylor.js') }}"></script>
</body>
</html>
